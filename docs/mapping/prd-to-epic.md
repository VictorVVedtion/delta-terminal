# PRD 到 EPIC 映射文档

> 版本：1.0
> 创建日期：2025-12-26
> 最后更新：2025-12-26

---

## 文档目的

本文档建立 PRD (产品需求文档) 与实际开发 EPIC 之间的对应关系，确保：
1. 产品需求与开发工作的一致性
2. 功能覆盖完整性可追溯
3. 优先级执行符合 MVP 计划

---

## 映射总览

```
PRD 结构                           EPIC 实现
─────────────────────────────────────────────────────────
Epic 1: AI 对话交易助手
├── Feature 1.1 ───────────────► EPIC-001 策略部署
├── Feature 1.2 ───────────────► [待规划]
└── Feature 1.3 ───────────────► [待规划]

Epic 2: 交易所连接与管理
├── Feature 2.1 ───────────────► EPIC-006 交易所连接
├── Feature 2.2 ───────────────► [待规划]
└── Feature 2.3 ───────────────► [待规划]

Epic 3: 策略创建与回测
├── Feature 3.1 ───────────────► [待规划]
└── Feature 3.2 ───────────────► EPIC-002 + EPIC-007 回测系统

Epic 4: 风险管理系统
├── Feature 4.1 ───────────────► EPIC-004 风险管理
├── Feature 4.2 ───────────────► EPIC-004 风险管理
└── Feature 4.3 ───────────────► EPIC-004 风险管理 (部分)

Epic 5: 仪表盘与数据可视化
├── Feature 5.1 ───────────────► [待规划]
├── Feature 5.2 ───────────────► EPIC-003 监控画布 (部分)
└── Feature 5.3 ───────────────► [待规划]

额外实现
├── EPIC-003 监控画布 ─────────► 实时监控 (PRD 分散提及)
└── EPIC-005 通知系统 ─────────► 通知功能 (PRD 分散提及)
```

---

## 详细映射表

### PRD Epic 1: AI 对话交易助手

| PRD Feature | 优先级 | 实现 EPIC | 状态 | 覆盖度 |
|-------------|--------|-----------|------|--------|
| **Feature 1.1** 自然语言策略创建 | P0 | EPIC-001 | ✅ 完成 | 90% |
| **Feature 1.2** 策略智能分析与建议 | P1 | 待规划 | ⏳ 待开始 | 0% |
| **Feature 1.3** AI 市场洞察 | P2 | 待规划 | ⏳ 待开始 | 0% |

#### Feature 1.1 详细映射

| PRD User Story | 验收标准 | EPIC Story | 实现状态 |
|----------------|----------|------------|----------|
| US-1.1.1 自然语言描述交易想法 | 6条 | Story 1.1 + ChatInterface | ✅ 完成 |
| US-1.1.2 AI 生成结构化策略配置 | 5条 | Story 1.2 A2UI InsightData | ✅ 完成 |
| US-1.1.3 多轮对话优化策略 | 6条 | ChatInterface 上下文 | ⚠️ 部分 |

#### 缺失功能 (Feature 1.2, 1.3)

- [ ] AI 风险评估报告
- [ ] AI 主动优化建议
- [ ] 实时市场解读
- [ ] 智能交易信号推送

---

### PRD Epic 2: 交易所连接与管理

| PRD Feature | 优先级 | 实现 EPIC | 状态 | 覆盖度 |
|-------------|--------|-----------|------|--------|
| **Feature 2.1** 交易所账户连接 | P0 | EPIC-006 | 🔄 进行中 | 70% |
| **Feature 2.2** 实时账户数据同步 | P0 | 待规划 | ⏳ 待开始 | 0% |
| **Feature 2.3** 智能订单路由 | P2 | 待规划 | ⏳ 待开始 | 0% |

#### Feature 2.1 详细映射

| PRD User Story | 验收标准 | EPIC Story | 实现状态 |
|----------------|----------|------------|----------|
| US-2.1.1 安全 API 密钥管理 | 6条+安全要求 | Story 6.1, 6.2, 6.3 | 🔄 进行中 |
| US-2.1.2 多交易所统一管理 | 6条 | Story 6.4 Settings 集成 | 🔄 进行中 |

#### 缺失功能 (Feature 2.2, 2.3)

- [ ] WebSocket 余额实时推送
- [ ] 订单历史同步
- [ ] 跨交易所资产汇总
- [ ] 智能订单路由（比价）

---

### PRD Epic 3: 策略创建与回测

| PRD Feature | 优先级 | 实现 EPIC | 状态 | 覆盖度 |
|-------------|--------|-----------|------|--------|
| **Feature 3.1** 多样化策略类型 | P0-P2 | 待规划 | ⏳ 待开始 | 20% |
| **Feature 3.2** 专业回测引擎 | P1 | EPIC-002 + EPIC-007 | ✅ 完成 | 85% |

#### Feature 3.1 策略类型覆盖

| 策略类型 | PRD 优先级 | 实现状态 |
|----------|-----------|----------|
| 条件单 | P0 | ⚠️ 基础结构 |
| 定投 (DCA) | P0 | ❌ 未实现 |
| 网格交易 | P1 | ❌ 未实现 |
| 追踪止损 | P1 | ❌ 未实现 |
| 跨所套利 | P2 | ❌ 未实现 |
| 三角套利 | P3 | ❌ 未实现 |
| 期现套利 | P3 | ❌ 未实现 |

#### Feature 3.2 详细映射

| PRD User Story | 验收标准 | EPIC Story | 实现状态 |
|----------------|----------|------------|----------|
| US-3.2.1 历史数据回测 | 6条 | EPIC-002 全部 | ✅ 完成 |
| US-3.2.2 参数优化 | 6条 | EPIC-007 部分 | ⚠️ 部分 |
| US-3.2.3 策略对比 | 5条 | 待规划 | ❌ 未实现 |

---

### PRD Epic 4: 风险管理系统

| PRD Feature | 优先级 | 实现 EPIC | 状态 | 覆盖度 |
|-------------|--------|-----------|------|--------|
| **Feature 4.1** 智能止损止盈 | P0 | EPIC-004 | ✅ 完成 | 80% |
| **Feature 4.2** 仓位与资金管理 | P0 | EPIC-004 | ✅ 完成 | 70% |
| **Feature 4.3** 异常监测与熔断 | P1 | EPIC-004 | ⚠️ 部分 | 50% |

#### Feature 4.1 详细映射

| PRD User Story | 验收标准 | EPIC Story | 实现状态 |
|----------------|----------|------------|----------|
| US-4.1.1 固定止损止盈 | 7条 | EPIC-004 Story 4.1 | ✅ 完成 |
| US-4.1.2 追踪止损 | 5条 | 待规划 | ❌ 未实现 |

#### 缺失功能

- [ ] 追踪止损 (动态调整)
- [ ] 市场异常自动监测
- [ ] 策略熔断历史日志

---

### PRD Epic 5: 仪表盘与数据可视化

| PRD Feature | 优先级 | 实现 EPIC | 状态 | 覆盖度 |
|-------------|--------|-----------|------|--------|
| **Feature 5.1** 总览仪表盘 | P0 | 待规划 | ⚠️ 基础布局 | 30% |
| **Feature 5.2** 策略详情页 | P0 | EPIC-003 部分 | ⚠️ 部分 | 40% |
| **Feature 5.3** 高级图表 | P1 | 待规划 | ❌ 未实现 | 0% |

#### 缺失功能

- [ ] 资产分布饼图
- [ ] 资产趋势折线图 (7天/30天)
- [ ] 策略性能详情页
- [ ] 交易日志时间线
- [ ] TradingView K线图集成
- [ ] 策略对比看板

---

## 额外实现 (PRD 未明确定义)

### EPIC-003: 实时监控画布

**来源**: PRD 分散提及的监控需求

| 功能 | 实现状态 |
|------|----------|
| 实时价格监控 | ✅ 完成 |
| 策略运行状态 | ✅ 完成 |
| 交易信号可视化 | ✅ 完成 |

### EPIC-005: 通知系统

**来源**: PRD Feature 1.3 US-1.3.2 提及推送通知

| 功能 | 实现状态 |
|------|----------|
| Toast 通知组件 | ✅ 完成 |
| NotificationCenter | ✅ 完成 |
| 通知历史 | ✅ 完成 |

---

## 覆盖率统计

### 按 PRD Epic 统计

| PRD Epic | Features | 已覆盖 | 覆盖率 |
|----------|----------|--------|--------|
| Epic 1: AI 对话助手 | 3 | 1 | 33% |
| Epic 2: 交易所连接 | 3 | 1 | 33% |
| Epic 3: 策略回测 | 2 | 1 | 50% |
| Epic 4: 风险管理 | 3 | 2.5 | 83% |
| Epic 5: 仪表盘 | 3 | 0.5 | 17% |
| **总计** | **14** | **6** | **43%** |

### 按优先级统计

| 优先级 | 总 Features | 已实现 | 覆盖率 |
|--------|-------------|--------|--------|
| P0 | 8 | 4 | 50% |
| P1 | 4 | 2 | 50% |
| P2 | 2 | 0 | 0% |

---

## MVP 对齐检查

PRD 定义的 MVP (前3个月) 必须功能：

| MVP 功能 | 状态 | 对应 EPIC |
|----------|------|-----------|
| ✅ AI 对话式策略创建 | 完成 | EPIC-001 |
| 🔄 币安交易所连接 | 进行中 | EPIC-006 |
| ⚠️ 条件单策略 | 基础 | 待补充 |
| ❌ 定投 (DCA) 策略 | 未开始 | 待规划 |
| ✅ 基础回测 | 完成 | EPIC-002 |
| ✅ 固定止损止盈 | 完成 | EPIC-004 |
| ⚠️ 仓位限制 | 部分 | EPIC-004 |
| ⚠️ 总览仪表盘 | 基础 | 待补充 |

**MVP 完成度**: ~60%

---

## 待规划 EPIC

基于 PRD 缺口分析，建议创建以下 EPIC：


### EPIC-009: 总览仪表盘
- **PRD 来源**: Feature 5.1
- **优先级**: P0
- **预估 Stories**: 4

### EPIC-010: AI 市场洞察
- **PRD 来源**: Feature 1.3
- **优先级**: P2
- **预估 Stories**: 3

### EPIC-011: 网格交易策略
- **PRD 来源**: Feature 3.1 US-3.1.3
- **优先级**: P1
- **预估 Stories**: 4

### EPIC-012: TradingView 图表集成
- **PRD 来源**: Feature 5.3
- **优先级**: P1
- **预估 Stories**: 2

---

## 更新日志

| 日期 | 版本 | 变更内容 | 作者 |
|------|------|----------|------|
| 2025-12-26 | 1.0 | 初始版本，完整映射分析 | Claude |

---

**文档维护说明**:
- 每完成一个 EPIC 后更新对应映射状态
- 每新增 EPIC 时确保与 PRD Feature 关联
- 月度检视覆盖率变化
