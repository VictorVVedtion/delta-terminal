#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ“ Validating commit message..."

# Validate commit message using commitlint
npx --no -- commitlint --edit "$1" || {
  echo ""
  echo "âŒ Commit message does not follow Conventional Commits format!"
  echo ""
  echo "Expected format: <type>(<scope>): <subject>"
  echo ""
  echo "Valid types:"
  echo "  feat:     æ–°åŠŸèƒ½"
  echo "  fix:      ä¿®å¤bug"
  echo "  docs:     æ–‡æ¡£æ›´æ–°"
  echo "  style:    ä»£ç æ ¼å¼è°ƒæ•´"
  echo "  refactor: é‡æ„"
  echo "  perf:     æ€§èƒ½ä¼˜åŒ–"
  echo "  test:     æµ‹è¯•ç›¸å…³"
  echo "  build:    æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–å˜æ›´"
  echo "  ci:       CIé…ç½®æ–‡ä»¶å’Œè„šæœ¬å˜æ›´"
  echo "  chore:    å…¶ä»–ä¸ä¿®æ”¹srcæˆ–testçš„å˜æ›´"
  echo "  revert:   å›é€€ä¹‹å‰çš„æäº¤"
  echo ""
  echo "Examples:"
  echo "  feat(ai): add new NLP processor"
  echo "  fix(trading): resolve order execution delay"
  echo "  docs: update API documentation"
  echo ""
  exit 1
}

echo "âœ… Commit message is valid!"
