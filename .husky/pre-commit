#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged for code formatting and linting
echo "ğŸ¨ Running lint-staged..."
npx lint-staged || {
  echo "âŒ Lint-staged checks failed!"
  exit 1
}

# Run type check across all workspaces using Turborepo
echo "ğŸ“¦ Type checking all workspaces..."
npx turbo run type-check --filter='[HEAD^1]' --continue || {
  echo "âŒ Type check failed in one or more workspaces!"
  exit 1
}

# Run linting across all workspaces using Turborepo
echo "ğŸ” Linting all workspaces..."
npx turbo run lint --filter='[HEAD^1]' --continue || {
  echo "âŒ Linting failed in one or more workspaces!"
  exit 1
}

echo "âœ… All pre-commit checks passed!"
